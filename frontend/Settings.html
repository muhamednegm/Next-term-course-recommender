<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings</title>
  <link rel="stylesheet" href="settings.css">
  <link rel="icon" type="image/x.icon" href="logo.jpg">
  <script src="auth.js"></script>
</head>
<body>

<div class="app-container">
  <div class="menu-icon" onclick="toggleMenu()">â˜°</div>

  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <img src="logo.jpg" alt="College Logo" class="college-logo">
      <div class="close-btn" onclick="toggleMenu()">âœ•</div>
    </div>

    <ul>
      <li><a href="performance.html">ğŸ“ˆ Performance</a></li>
      <li><a href="student.html">ğŸ“ Student</a></li>
      <li><a href="recommended.html">â­ Recommended</a></li>
      <li><a href="settings.html">âš™ï¸ Settings</a></li>
      <li><a href="#" onclick="window.auth.logout()">ğŸšª Logout</a></li>
    </ul>
  </nav>

  <div class="phone-container">
    <header class="header">
      <h1>Settings</h1>
      <p>Update your personal information and <br>dashboard preferences</p>
    </header>

    <main class="container">
      <section class="profile-card">
        <div class="profile-info">
          <img src="img4.jpg" alt="Profile Picture" class="profile-circle">
          <div class="info">
            <h2 id="realStudentName">Loading...</h2>
            <p class="email" id="realStudentEmail">Loading...</p>
          </div>
          <button class="save-btn">Save</button>
        </div>

        <div class="details">
          <p id="realStudentDetails">Loading student data...</p>
          <p id="realStudentMajor">Loading...</p>
        </div>
      </section>

      <section class="preferences">
        <h3>Preferences</h3>
        <p class="semester" id="realCurrentSemester"><strong>Current Semester:</strong> Loading...</p>

        <div class="cards-grid">
          <div class="card purple">
            <h4>ğŸ“§ Email</h4>
            <p>Designed communication options for better collaboration</p>
          </div>
          <div class="card yellow">
            <h4>ğŸ”” Notifications</h4>
            <p>Customize how you receive updates</p>
          </div>
          <div class="card red">
            <h4>ğŸ§© Profile Features</h4>
            <p>Manage visibility and personal info</p>
          </div>
          <div class="card blue">
            <h4>ğŸ“ˆ Performance</h4>
            <p>Enable tracking and analytics</p>
          </div>
          <div class="card orange">
            <h4>ğŸ§± Widgets</h4>
            <p>Dashboard customization tools</p>
          </div>
          <div class="card light-yellow">
            <h4>âš™ï¸ Notification Settings</h4>
            <p>Control frequency and alert type</p>
          </div>
        </div>

        <p class="footer-text">
          Change your personal settings for <br> communication and notifications.<br>
          Click below to apply changes.
        </p>

        <button class="start-btn">Start Card</button>
      </section>
    </main>
  </div>

  <script>
    function toggleMenu() {
      document.getElementById("sidebar").classList.toggle("active");
    }

    document.querySelector('.save-btn').addEventListener('click', () => {
      alert('Profile saved successfully!');
    });

    document.querySelector('.start-btn').addEventListener('click', () => {
      alert('Changes applied successfully!');
    });

    // Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©
    document.addEventListener('DOMContentLoaded', async function() {
      // 1. Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
      const studentId = window.auth.checkLogin();
      if (!studentId) return;
      
      console.log('ğŸ”„ Loading student data for:', studentId);
      
      // 2. Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† localStorage (ØªÙ… Ø­ÙØ¸Ù‡Ø§ ÙÙŠ index.html)
      const studentName = localStorage.getItem('student_name') || 'Student';
      const studentMajor = localStorage.getItem('student_major') || 'Computer Science';
      const studentGPA = localStorage.getItem('student_gpa') || '3.5';
      const studentLevel = localStorage.getItem('selected_level') || '3';
      
      console.log('ğŸ“‹ Student data from localStorage:', {
        name: studentName,
        major: studentMajor,
        gpa: studentGPA,
        level: studentLevel
      });
      
      // 3. ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„ØµÙØ­Ø©
      
      // Ø§Ù„Ø§Ø³Ù…
      const nameElement = document.querySelector('.profile-info h2');
      if (nameElement) {
        nameElement.textContent = studentName;
      }
      
      // Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ
      const emailElement = document.querySelector('.profile-info .email');
      if (emailElement) {
        emailElement.textContent = `${studentId.toLowerCase()}@university.edu`;
      }
      
      // Ø§Ù„ØªÙØ§ØµÙŠÙ„
      const detailsElement = document.querySelector('.details p:first-child');
      if (detailsElement) {
        detailsElement.innerHTML = `<strong>ID:</strong> ${studentId}<br>
        <strong>GPA:</strong> ${studentGPA}`;
      }
      
      // Ø§Ù„ØªØ®ØµØµ ÙˆØ§Ù„Ù…Ø³ØªÙˆÙ‰
      const roleElement = document.querySelector('.details p:last-child');
      if (roleElement) {
        roleElement.textContent = `${studentMajor}, Level ${studentLevel}`;
      }
      
      // Ø§Ù„ÙØµÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ Ø§Ù„Ø­Ø§Ù„ÙŠ
      const semesterElement = document.querySelector('.semester');
      if (semesterElement) {
        const semesterNumber = parseInt(studentLevel) * 2;
        semesterElement.innerHTML = `<strong>Current Semester:</strong> Semester ${semesterNumber}`;
      }
      
      console.log('âœ… Settings page updated with real data');
    });
  </script>
</body>
</html>