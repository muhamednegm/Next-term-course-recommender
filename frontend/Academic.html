<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Academic Info</title>
  <link rel="stylesheet" href="academic.css">
  <link rel="icon" type="image/x.icon" href="logo.jpg">
</head>
<body>
  <script src="auth.js"></script>
  <script>
  // ØªØ­Ù‚Ù‚ Ù…Ù† ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ (Ø¨Ø³ÙŠØ·)
  const studentId = localStorage.getItem('student_id');
  if (!studentId) {
      alert('Please login first!');
      window.location.href = 'index.html';
  }
  </script>
  
  <div class="container">
    <img src="logo.jpg" alt="Logo" class="logo">
    <h1 class="title">Next-Term Course<br>Recommendation</h1>

    <div class="form-card">
      <h3>Student Academic Information</h3>

      <form id="academicForm">
        <div class="form-group">
          <label><i class="icon">ğŸ“</i> Student Name</label>
          <select id="studentSelect" required>
            <option>University ID</option>
          </select>
        </div>

        <div class="form-group">
          <label><i class="icon">ğŸ“˜</i> Major</label>
          <select id="majorSelect" required>
            <option value="">Select Major</option>
            <option value="Computer Science">Computer Science</option>
            <option value="Systems Information">Systems Information</option>
            <option value="Software Engineering">Software Engineering</option>
          </select>
        </div>

        <div class="form-group">
          <label><i class="icon">ğŸ“Š</i> Current GPA</label>
          <select id="gpaSelect" required>
            <option value="">Select GPA Range</option>
            <option value="excellent">Excellent (3.5 - 4.0)</option>
            <option value="very_good">Very Good (3.0 - 3.49)</option>
            <option value="good">Good (2.5 - 2.99)</option>
            <option value="fair">Fair (2.0 - 2.49)</option>
            <option value="custom">Enter Custom GPA</option>
          </select>
          <input type="number" id="customGPA" step="0.01" min="0" max="4" placeholder="Or enter exact GPA" style="display: none; margin-top: 5px;">
        </div>


        <div class="form-group">
          <label><i class="icon">ğŸ“…</i> Level</label>
          <select id="levelSelect" required>
            <option value="">Select Level</option>
            <option value="1">Level 1</option>
            <option value="2">Level 2</option>
            <option value="3">Level 3</option>
            <option value="4">Level 4</option>
          </select>
        </div>

        <button type="button" id="analyzeBtn" class="analyze-btn">Analyze Performance</button>
      </form>
    </div>
  </div>

  <script>
document.addEventListener('DOMContentLoaded', function() {
    // Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø·Ø§Ù„Ø¨ Ù…Ù† localStorage (ØªÙ… Ø­ÙØ¸Ù‡Ø§ ÙÙŠ index.html)
    const studentId = localStorage.getItem('student_id');
    const studentName = localStorage.getItem('student_name') || 'Student';
    const studentMajor = localStorage.getItem('student_major') || 'Computer Science';
    const studentGPA = localStorage.getItem('student_gpa') || '3.5';
    const studentLevel = localStorage.getItem('student_level') || '3';
    
    if (!studentId) {
        alert('Please login first!');
        window.location.href = 'index.html';
        return;
    }
    
    // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
    const studentSelect = document.getElementById('studentSelect');
    if (studentSelect) {
        studentSelect.innerHTML = `<option>${studentName} (ID: ${studentId})</option>`;
    }
    
    const majorSelect = document.getElementById('majorSelect');
    if (majorSelect) {
        majorSelect.value = studentMajor;
    }
    
    const gpaSelect = document.getElementById('gpaSelect');
    if (gpaSelect) {
        // Ø§Ø®ØªÙŠØ§Ø± Ø£Ù‚Ø±Ø¨ Ù‚ÙŠÙ…Ø© GPA
        const gpaValues = [4.0, 3.5, 3.0, 2.5];
        const closestGPA = gpaValues.reduce((prev, curr) => {
            return Math.abs(curr - parseFloat(studentGPA)) < Math.abs(prev - parseFloat(studentGPA)) ? curr : prev;
        });
        gpaSelect.value = closestGPA;
    }
    
    const levelSelect = document.getElementById('levelSelect');
    if (levelSelect) {
        levelSelect.value = studentLevel;
    }
    
    // Ø²Ø± Analyze Performance
    document.getElementById('analyzeBtn').addEventListener('click', function() {
        // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù…Ø¨Ø§Ø´Ø±Ø© Ø¥Ù„Ù‰ performance.html
        window.location.href = 'performance.html';
    });
    
    console.log('âœ… Academic page loaded with:', { studentId, studentName, studentMajor, studentGPA, studentLevel });
});
</script>
</body>
</html>